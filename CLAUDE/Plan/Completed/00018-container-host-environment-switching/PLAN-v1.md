# Plan 00018: Fix Hooks Daemon Failure After Container/Host Environment Switching

**Status**: Not Started
**Created**: 2026-01-30
**Priority**: High
**Type**: Bug Fix
**GitHub Issue**: #15

## Overview

Fix ModuleNotFoundError when switching between container environments and host environments by eliminating Python from the per-invocation hook path and implementing fail-fast venv validation.

## Problem

When users switch between container (e.g., `/workspace/`) and host (e.g., `~/Projects/`) environments, the daemon fails with cryptic errors due to:
1. Editable install `.pth` files with absolute container paths
2. Python version mismatches between venv creation and runtime
3. Broken pip binaries after Python upgrades

## Solution

Comprehensive architectural redesign of init.sh:
- Pure bash path computation using md5sum
- socat for socket communication (replaces Python socket client)
- Pure bash JSON error generation
- uv run for daemon startup (handles Python version management)
- Fail-fast venv validation with actionable errors

## Implementation Plan

**Full detailed plan with 8 phases and comprehensive task breakdown was generated by Opus agent (agentId: ac9136f).**

See agent output above and GitHub Issue #15 for complete technical specification, phase breakdown, success criteria, and risk analysis.

## Next Steps

1. Review full plan from Opus agent output
2. Validate approach with project maintainers
3. Begin Phase 1: Venv health validation
