# Release v2.15.1 - README Improvements, QA Pipeline & Priority Fix

**Release Date:** 2026-02-20
**Type:** Patch Release

## Summary

This patch release fixes genuine error hiding violations exposed when the error-hiding audit was integrated into the QA pipeline, improves the README to lead with developer experience value, integrates the error-hiding audit into the QA pipeline with an exclusion file for intentional patterns, fixes a handler priority collision, updates the status line format to use colon separators with an upgrade indicator, and replaces an invented status line example with the real output. No handler logic changes break backwards compatibility.

## Highlights

- **Error hiding fixes** - 14 genuine error-hiding violations fixed: 4 monitoring handlers and 10 hook dispatchers now log skipped operations at DEBUG level instead of silently continuing
- **Error hiding exclusions** - 75 intentional fail-open patterns documented in `error_hiding_exclusions.json` with reasons
- **README rewrite** - README restructured to lead with developer experience value proposition; concrete pain points and benefits are now front and centre
- **Status line section** - New README section documenting the status line hook format, colon separators, and upgrade indicator
- **Priority collision fix** - `enforce_llm_qa` priority corrected from 15 to 41, resolving a collision with `error_hiding_blocker` at priority 13
- **Error hiding audit in QA pipeline** - Error-hiding audit now a formal QA pipeline step
- **Accurate status line example** - Documentation example replaced with real daemon output

## Changes

### Added

- **Status line section in README**: New documentation section describing the status line hook, its format, and the colon-separator convention with upgrade indicator.
- **Error hiding audit exclusions file** (`scripts/qa/error_hiding_exclusions.json`): Formal exclusion list documenting 75 intentional fail-open patterns with reasons.

### Changed

- **README rewritten to lead with developer experience value proposition**: README restructured to open with concrete developer pain points and benefits rather than technical implementation details.
- **Error hiding audit integrated into QA pipeline**: The error-hiding audit check is now a formal step in the QA pipeline with deduplication and exclusion file support.
- **Status line section uses colon separators and upgrade indicator**: Status line hook output format updated to use consistent colon separators and includes an upgrade indicator when a newer daemon version is available.

### Fixed

- **Silent error hiding in monitoring handlers**: Four monitoring handlers (`notification_logger`, `transcript_archiver`, `cleanup_handler`, `subagent_completion_logger`) silently swallowed `OSError` exceptions. Fixed to log at `WARNING` level.
- **Silent error hiding in hook dispatchers**: All 10 hook entry points silently continued past `RuntimeError` when instantiating handlers requiring `ProjectContext`. Fixed to log at `WARNING` level.
- **enforce-llm-qa priority collision** (15 to 41): `enforce_llm_qa` handler priority corrected from 15 (which collided with `error_hiding_blocker` at priority 13 in the safety range) to 41 (workflow range). Improves pipe blocker snippet in documentation.
- **Status line example replaced with actual output**: Replaced an invented/illustrative status line example in documentation with the real output produced by the daemon.

## Upgrade Instructions

No breaking changes. Standard upgrade procedure applies.

**Option 1: Using the /hooks-daemon skill (recommended):**

```bash
/hooks-daemon upgrade
```

**Option 2: Manual upgrade:**

```bash
cd .claude/hooks-daemon
git fetch --tags
git checkout v2.15.1
untracked/venv/bin/pip install -e .
untracked/venv/bin/python -m claude_code_hooks_daemon.daemon.cli restart
```

**Option 3: Scripted upgrade:**

```bash
cd .claude/hooks-daemon
./scripts/upgrade_version.sh v2.15.1
```

## Installation

### New Installations

```bash
cd .claude
git clone -b v2.15.1 https://github.com/Edmonds-Commerce-Limited/claude-code-hooks-daemon.git hooks-daemon
cd hooks-daemon
python3 -m venv untracked/venv
untracked/venv/bin/pip install -e .
untracked/venv/bin/python install.py
```

### Upgrading Existing Installations

See Upgrade Instructions above.

## Testing

This is a PATCH release. Handler changes are limited to:

- `pipe_blocker.py` - Documentation/snippet improvement only (no logic change)
- `daemon_stats.py` - Status line format update (colon separators, upgrade indicator)
- `notification_logger.py`, `transcript_archiver.py`, `cleanup_handler.py`, `subagent_completion_logger.py` - Added `DEBUG` logging for previously-silent `OSError` exceptions (no behaviour change for normal operation)
- All 10 `hooks/*.py` dispatcher files - Added `DEBUG` logging for `RuntimeError` when skipping handlers requiring `ProjectContext` (no behaviour change for normal operation)

The monitoring handler and hook dispatcher changes are logging-only (no logic changes). Targeted acceptance tests for `pipe_blocker` and `daemon_stats` cover the substantive handler changes per the PATCH release scoping policy in RELEASING.md Step 8.0.

- **Type Safety:** MyPy strict mode compliant (0 errors)
- **Security:** Bandit scan clean (0 issues)
- **Linting:** Ruff clean (0 violations)
- **Formatting:** Black compliant (0 files need reformatting)
- **Magic Values:** 0 violations
- **Dependencies:** 0 issues
- **Shell Scripts:** Shellcheck clean (0 errors, 0 warnings)

## Contributors

This release includes commits from:
- Edmonds Commerce team
- Claude Sonnet 4.6 (AI-assisted development)

## Breaking Changes

No breaking changes. This release is fully backwards-compatible with v2.15.0.

The account_display.py handler changes (strip org prefix) were made and then reverted in this release cycle â€” net zero change to that handler.

## Full Changelog

**Compare:** https://github.com/Edmonds-Commerce-Limited/claude-code-hooks-daemon/compare/v2.15.0...v2.15.1

**8 commits since v2.15.0:**
- `f59400d` Revert: remove org prefix stripping from account display handler
- `d9418d5` Fix: replace invented status line example with actual output
- `33658b2` Fix: strip org prefix from account display in status line (reverted)
- `2558eec` Add: status line section to README
- `b5a52f4` Fix: rewrite README to lead with developer experience value prop
- `c427032` Add: integrate error_hiding audit into QA pipeline
- `91b6830` Fix: enforce-llm-qa priority collision (15 to 41) and improve pipe blocker snippet
- `62b10c5` Add: status line hook section uses colon separators and upgrade indicator

See [CHANGELOG.md](../CHANGELOG.md#2151---2026-02-20) for the categorised changelog entry.
