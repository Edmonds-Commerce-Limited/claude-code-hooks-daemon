# Release v2.2.0 - Development Automation & Debugging

**Release Date:** 2026-01-27
**Type:** Minor Release

## Summary

This release introduces powerful developer tooling and automation capabilities, including custom sub-agents for QA and development workflows, an automated release management system, and comprehensive debugging tools for hook development.

## Highlights

- **Custom Sub-Agents**: New QA and development workflow automation agents for improved code quality and development velocity
- **Automated Release Management**: Complete `/release` skill with version detection, changelog generation, and GitHub integration
- **Hook Event Debugging**: New `scripts/debug_hooks.sh` tool for introspecting hook flows and handler execution during development
- **Self-Install Mode**: CLI now supports self-install capability for easier deployment automation
- **95% Test Coverage**: Critical QA fixes achieving the 95% coverage requirement with 2472 passing tests

## Changes

### Added
- Custom sub-agents for QA and development workflow automation
- Automated release management system with `/release` skill
- Hook event debugging tool (`scripts/debug_hooks.sh`) for handler development
- Self-install mode support to CLI and configuration system
- Debug infrastructure for troubleshooting hook flows
- `.gitignore` requirement validation in installer
- Automatic config file backup during installation

### Changed
- Release system orchestration to avoid nested agent spawning
- Installer now displays `.gitignore` template with mandatory instructions
- Documentation improvements for README config completeness and plugin events

### Fixed
- Critical QA failures achieving 95% test coverage requirement
- Stop event schema validation failure
- Critical hook response formatting bug with JSON schema validation
- 4 upstream installation and CLI bugs
- DRY violation in error response handling
- Release skill registration (SKILL.md frontmatter)
- README documentation issues with config examples

## Upgrade Instructions

This is a minor version update with no breaking changes. Standard upgrade process applies.

See `CLAUDE/UPGRADES/` for version-specific upgrade guides if available.

## Installation

### New Installations

```bash
cd .claude
git clone -b v2.2.0 https://github.com/Edmonds-Commerce-Limited/claude-code-hooks-daemon.git hooks-daemon
cd hooks-daemon
python3 -m venv untracked/venv
untracked/venv/bin/pip install -e .
untracked/venv/bin/python install.py
```

### Upgrading Existing Installations

```bash
cd .claude/hooks-daemon
git fetch --tags
git checkout v2.2.0
untracked/venv/bin/pip install -e .
untracked/venv/bin/python -m claude_code_hooks_daemon.daemon.cli restart
```

## Testing

- **Tests:** 2472 passing
- **Coverage:** 95.01%
- **Type Safety:** MyPy strict mode compliant
- **Security:** Bandit scan clean (0 HIGH severity issues)

## Key Features

### Development Automation

The new sub-agent system provides:
- **QA Agent**: Automated code quality enforcement with Black, Ruff, MyPy, Pytest, and Bandit
- **Dev Agent**: Workflow automation for common development tasks

### Release Management

The `/release` skill automates:
- Version detection from commit history
- Semantic versioning (MAJOR.MINOR.PATCH)
- Changelog generation (Keep a Changelog format)
- Release notes creation
- GitHub release publishing with tags

### Hook Debugging

The new `scripts/debug_hooks.sh` tool enables:
- Real-time hook event capture
- Handler execution tracing
- Hook input/output inspection
- Timing analysis

Usage:
```bash
./scripts/debug_hooks.sh start "Test scenario description"
# ... perform actions in Claude Code ...
./scripts/debug_hooks.sh stop
# Output shows complete event flow with timing and data
```

## Contributors

- Claude Sonnet 4.5 (AI Development Agent)
- Edmonds Commerce Development Team

## Full Changelog

**Compare:** https://github.com/Edmonds-Commerce-Limited/claude-code-hooks-daemon/compare/v2.1.0...v2.2.0

See [CHANGELOG.md](../CHANGELOG.md) for complete version history.
